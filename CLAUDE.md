### 標準的なワークフロー

1. まず、問題を徹底的に考え、コードベースで関連ファイルを読み、docs/todo.mdに計画を書き出します。
2. 計画には、完了したらチェックマークを付けられるToDo項目のリストを含めます。
3. 作業を始める前に、私に連絡を取り、計画を確認します。
4. 次に、ToDo項目に取り組み始め、完了したら完了マークを付けます。
5. 各ステップごとに、どのような変更を加えたのか、概要を説明してください。
6. 最後に、todo.mdファイルにレビューセクションを追加し、変更内容の概要とその他の関連情報を記載してください。

### Context7の自動使用

コード例や設定手順を尋ねる質問が来たり、それを検索する必要が出てきた場合には自動でcontext7を呼ぶ。ライブラリを導入する際にも必ず使用して、最新の詳細な仕様を確認してから作業に入ること。

### Sequential-thingingの自動使用

作業を行う際には自動でSequential-thingingを使って、慎重にステップバイステップに思考して、進めること。

### メモリの管理について

会話をコンパクト化した後にはかならず、メモリとドキュメントを再度読み込んで、プロジェクトの進行状況と、与えられた指示を再確認してから再スタートすること。

### コーディング原則

- 小さなエラーを放置しない。結果に全く影響がでないと確信できない場合には、かならず修正してから先に進むこと。

### 開発環境

- 実装は必ず仮想環境で行うこと。

### 日時の取得

- ドキュメントの更新などで現在日時を記載する場合には必ず明示的にシステムから現在日時を取得し、その情報を使うこと。

### Obsidian Abstractor 開発ガイドライン

#### プロジェクト概要

- 学術論文PDFをAIで要約し、Obsidianノートとして整理するツール
- PyMuPDFでPDF解析、Google Geminiで要約生成
- app-obsidian_ai_organizerとの連携を前提とした設計

#### 技術スタック

- **PDF処理**: PyMuPDF (高性能、メタデータ抽出可能)
- **AI**: Google Gemini (google-generativeai)
- **非同期処理**: asyncio, aiofiles
- **CLI**: click + rich

#### 重要な設計方針

1. **モジュール性**: 各機能を独立したモジュールとして実装
2. **非同期処理**: I/O処理は可能な限り非同期で実装
3. **エラーハンドリング**: PDFの多様性に対応する堅牢な処理
4. **拡張性**: 将来的な機能追加を考慮した設計

#### コーディング規約

- Black/isortでフォーマット統一
- Type hintsを積極的に使用
- Docstringは必須（Google style）
- エラーメッセージは日本語対応

#### テスト要件

- PDF処理のエッジケース（破損、暗号化、大容量）
- AI APIのモック化
- 非同期処理の適切なテスト

# Obsidian Abstractor Configuration
# Copy this file to config.yaml and update with your settings

# API Configuration
api:
  # Google AI API key for Gemini
  google_ai_key: "your-gemini-api-key-here"
  # Model to use (gemini-pro, gemini-pro-vision)
  model: "gemini-pro"
  # Maximum tokens for response
  max_tokens: 2048

# Vault Configuration
vault:
  # Path to your Obsidian vault
  path: "~/Documents/Obsidian/MyVault"

# Global Output Configuration
output:
  # Default output path for all operations
  # Supports vault:// prefix for vault-relative paths
  default_path: "vault://Processed/Inbox"
  # Note template to use
  template: "default"
  # File naming pattern
  file_pattern: "{title}"

# Watch Configuration
watch:
  # Folders to monitor for new PDFs
  # Supports: vault:// prefix, ~/ for home, absolute paths
  folders:
    - "~/Downloads/Papers"
    - "vault://External/PDFs"
    - "~/Desktop/Research"
  # Output path for watch operation (overrides global default)
  # Supports placeholders: {{year}}, {{month}}, {{day}}
  output_path: "vault://Papers/{{year}}/{{month}}"
  # File patterns to match
  patterns:
    - "*.pdf"
    - "*.PDF"
  # Patterns to ignore
  ignore_patterns:
    - "*draft*"
    - "*tmp*"
    - ".*"  # Hidden files

# Abstractor Settings
abstractor:
  # Output language (ja: Japanese, en: English)
  language: "ja"
  # Maximum length of abstract in characters
  max_length: 1000
  # Include citations in the abstract
  include_citations: true
  # Include figure descriptions
  include_figures: true
  # Extract and list keywords
  extract_keywords: true

# PDF Processing
pdf:
  # Maximum file size in MB
  max_size_mb: 100
  # Text extraction method (auto, layout, simple)
  extraction_mode: "auto"
  # Handle encrypted PDFs
  handle_encrypted: false
  # Enable visual extraction (multimodal AI)
  enable_visual_extraction: false
  # Maximum pages for image extraction
  max_image_pages: 3
  # DPI for image extraction
  image_dpi: 150

# PDF Filtering
pdf_filter:
  # Enable PDF filtering
  enabled: false
  # Only process academic papers
  academic_only: false
  # Minimum score to be considered academic paper
  academic_threshold: 50
  # Page count requirements
  min_pages: 5
  max_pages: 500
  # File size requirements (MB)
  min_size_mb: 0.1
  max_size_mb: 100
  # Quarantine folder for non-academic PDFs (optional)
  # quarantine_folder: "~/Documents/PDFs/Quarantine"
  # Enable quarantine (move non-academic PDFs)
  quarantine_enabled: false

# Scoring Rules for PDF Filter
scoring_rules:
  # Positive scoring patterns
  positive:
    # DOI pattern found (default: 50)
    doi_found: 50
    # Abstract section found (default: 20)
    abstract_found: 20
    # References section found (default: 20)
    references_found: 20
    # Academic publisher detected (default: 20)
    academic_publisher: 20
    # Typical page count (8-40 pages) (default: 15)
    pages_in_range: 15
  # Negative scoring patterns
  negative:
    # Invoice pattern in filename (default: -100)
    invoice_in_filename: -100
    # Receipt pattern in filename (default: -100)
    receipt_in_filename: -100
    # Presentation/slides pattern (default: -50)
    presentation_in_filename: -50
    # Manual/guide pattern (default: -70)
    manual_in_filename: -70

# Advanced Settings
advanced:
  # Enable caching of processed PDFs
  pdf_cache: true
  # Cache directory
  cache_dir: "~/.cache/obsidian-abstractor"
  # Logging level (DEBUG, INFO, WARNING, ERROR)
  log_level: "INFO"
  # Log file location
  log_file: "~/.obsidian-abstractor/logs/app.log"
  # Number of worker threads
  workers: 2
  # Retry failed PDFs
  retry_failed: true
  # Retry attempts
  retry_attempts: 3

# Rate Limiting
rate_limit:
  # Requests per minute
  requests_per_minute: 60
  # Delay between requests (seconds)
  request_delay: 1
  # Batch size for multiple PDFs
  batch_size: 5

# Paperpile Sync Configuration
paperpile_sync:
  # Enable Paperpile synchronization
  enabled: false
  # rclone remote name (must be configured with 'rclone config')
  rclone_remote: "paperpile:"
  # Folders to sync from Paperpile
  source_dirs:
    - "Papers"      # Organized papers
    - "Unsorted"    # Unorganized papers
  # Sync files modified within this time period
  # Examples: "7d" (7 days), "24h" (24 hours), "30d" (30 days)
  max_age: "7d"
  # Inbox directory in vault (relative to vault root)
  # If not specified, uses 'Papers/Inbox' by default
  inbox_dir: "Papers/Inbox"
  # Log file for sync operations
  log_file: "~/.paperpile-sync.log"